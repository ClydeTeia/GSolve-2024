(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[846],{4804:function(e,t,s){Promise.resolve().then(s.bind(s,3163))},3163:function(e,t,s){"use strict";s.r(t);var n=s(7437),a=s(2265),i=s(3693),r=s.n(i),o=s(2180);t.default=()=>{let e;let t=(0,a.useRef)(null),s="360px",i="480px",[l,c]=(0,a.useState)(null),[u,d]=(0,a.useState)("VIDEO"),[m,h]=(0,a.useState)(!1),[g,f]=(0,a.useState)(""),[x,w]=(0,a.useState)(),[p,b]=(0,a.useState)(!1),[y,E]=(0,a.useState)(""),[v,N]=(0,a.useState)(""),[S,j]=(0,a.useState)("She sell seashells on the sea shore");(0,a.useEffect)(()=>{(async()=>{let e=await o.n.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.3/wasm");c(await o.iW.createFromOptions(e,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/visionx_gesture_recognizer/gesture_recognizer_better.task",delegate:"GPU"},runningMode:u,numHands:1}))})()},[]);let O=-1;(async()=>{if(t.current){let n=t.current.video;if(l&&n){"IMAGE"===u&&(d("VIDEO"),await l.setOptions({runningMode:"VIDEO"}));let t=async()=>{let a=Date.now();if(n.currentTime!==O&&(O=n.currentTime,e=l.recognizeForVideo(n,a)),n.style.width=i,n.style.height=s,e&&e.gestures&&e.gestures.length>0&&e.handedness.length>0){let t=e.gestures[0][0].categoryName||"none",s=parseFloat(Number(100*e.gestures[0][0].score).toFixed(2));f(t),w(s),E(t),console.log(y)}m&&requestAnimationFrame(t)};requestAnimationFrame(t)}}})();let _=async()=>{if(!l)return;h(e=>!e),b(e=>!e);let e=document.getElementById("webcamButton");e&&(m?e.innerText="ENABLE PREDICTIONS":e.innerText="DISABLE PREDICTIONS"),console.log("try open webcam");try{let e=await navigator.mediaDevices.getUserMedia({video:!0});if(t.current){let s=t.current.video;s&&(s.srcObject=e)}}catch(e){console.error("Error accessing webcam:",e)}};return(0,a.useEffect)(()=>{let e=0;(function(){if(S.length>0){let e=S[0];(y.toLowerCase()===e.toLowerCase()||"."===e||" "===e||","===e)&&(N(v+e),j(S.slice(1)))}})(),console.log(e+1),e++},[y,g,x]),(0,n.jsxs)("div",{className:"w-screen h-screen bg-gray-800 flex",children:[(0,n.jsxs)("div",{className:"w-4/5 h-4/5 m-auto",children:[(0,n.jsx)("h3",{className:"w-full text-9xl font-bold text-center mt-20",children:y}),(0,n.jsxs)("h3",{className:"w-full text-3xl font-bold text-center mt-20",children:[(0,n.jsx)("span",{id:"recognized-text",children:v}),(0,n.jsx)("span",{id:"text-challenge",className:"text-gray-400",children:S})]})]}),(0,n.jsxs)("div",{className:"absolute",children:[(0,n.jsx)("button",{id:"webcamButton",onClick:async()=>{await _()},children:"Enable Webcam"}),(0,n.jsx)(r(),{videoConstraints:{facingMode:"user"},audio:!1,ref:t,className:"z-10",id:"webcam",width:i,height:s,autoPlay:p,style:{opacity:0}}),(0,n.jsx)("canvas",{id:"output_canvas",className:"z-10",style:{opacity:0}})]})]})}}},function(e){e.O(0,[641,971,938,744],function(){return e(e.s=4804)}),_N_E=e.O()}]);